<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Relatório de Cadastros</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="top-bar">
  <h1><a href="index.html" class="titulo-link">YAH Church Kids em Movimento</a></h1>
  <nav>
    <a href="cadastro.html">Cadastrar Criança</a>
    <a href="lista.html">Listar Cadastros</a>
    <a href="relatorio.html">Gerar Relatório</a>
  </nav>
</header>


  <main>
    <h2>Relatório Completo</h2>
    <button onclick="exportarCSV()">Exportar para CSV</button>
    <ul id="relatorioLista"></ul>
  </main>

  <script>
    const lista = document.getElementById('relatorioLista');
    const dados = JSON.parse(localStorage.getItem('criancas')) || [];

    dados.forEach((cr) => {
      const item = document.createElement('li');
      item.innerHTML = `
        <strong>${cr.nome}</strong><br>
        Nascimento: ${cr.nascimento} <br>
        Idade: ${cr.idade} anos<br>
        Modalidade: ${cr.modalidade} <br>
        Pai: ${cr.pai} <br>
        Mãe: ${cr.mae} <br>
        Telefone: ${cr.telefone} <br>
        E-mail: ${cr.email}<br>
        <hr>
      `;
      lista.appendChild(item);
    });

    function exportarCSV() {
      if (dados.length === 0) {
        alert("Nenhum cadastro disponível para exportar.");
        return;
      }

      let csv = " RELATORIO  COMPLETO\n\n";
      dados.forEach(cr => {
        csv += ` Nome: ${cr.nome}\n Nascimento: ${cr.nascimento}\n Idade: ${cr.idade}\n Modalidade: ${cr.modalidade}\n Pai: ${cr.pai}\n Mae: ${cr.mae}\n Telefone: ${cr.telefone}\n E-mail: ${cr.email}\n\n`;
      });

      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "cadastros_criancas.csv";
      link.click();
    }
  </script>
</body>
</html>
